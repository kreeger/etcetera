{% extends "root.html" %}
{% load etcetera_tags %}

{% block title %}
   {% if form.initial %}editing WO #{{ object.id }}
      {% else %}New work order
   {% endif %}
{% endblock %}

{% block breadcrumb %}
   <a href="{% url etcetera-home %}">Home</a> &rsaquo; 
   <a href="{% if object.archived %}{% url service-archive %}{% else %}{% url service-index %}{% endif %}">Service{% if object.archived %} Archive{% endif %}</a> &rsaquo;
   {% if form.initial %}<a href="{% url service-detail object.id %}">Work Order {{ object.id }}</a> &rsaquo; Edit
      {% else %}New
   {% endif %}
{% endblock %}

{% block content %}
<div id="detail">
   <form action="" method="POST">
   <h1><span class="right"><input type="submit" name="save" value="save" id="save" /></span>
      {% if form.initial %}WO #{{ object.id }}: <span class="head">edit mode</span>
         {% else %}New work order <span class="head">creation mode</span>
      {% endif %}
   </h1>
   <table id="toprow">
      <tr><td{% if form.equipment_text.errors %} class="errorlist"{% endif %}><span class="head">Equipment description</span> {{ form.equipment_text }}{{ form.equipment_text.errors }}</td><td id="barcode"{% if form.barcode.errors %} class="errorlist"{% endif %}><span class="head">{{ form.barcode.label }}</span> {{ form.barcode }}{{ form.barcode.errors }}</td></tr>
   </table>
   
   <h2>
      {% if form.initial %}<span class="right"><span class="head">completed
         {% if not object.completion_date %}?</span> {{ form.archived }}
            {% else %}</span> {{ object.completion_date|date:'n/j/Y g:iA' }} (un-complete{{ form.uncomplete }})
         {% endif %}</span>
      {% endif %}
      {% if form.priority.errors %}<span class="errorlist">{% endif %}
         {% if not form.initial %}Priority: {% endif %}{{ form.priority }}       
            {% if form.initial %}priority{% endif %}{{ form.priority.errors }}
      {% if form.priority.errors %}</span>{% endif %}{% if not form.initial %}<br />Work type: {% endif %}
      {% if form.work_type.errors %}<span class="errorlist">{% endif %}
         {{ form.work_type }}{{ form.work_type.errors }}
      {% if form.work_type.errors %}</span>{% endif %}
      {% if form.initial %}&rsaquo; <span class="head">Created</span> {{ object.creation_date|date:'n/j/Y g:iA' }}{% endif %}
   </h2>
   <div class="right">
      <h3>Contact information</h3>
      <table>
         <tr{% if form.phone.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.phone.label }}</td><td>{{ form.phone }}{{ form.phone.errors }}</td></tr>
         <tr{% if form.email.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.email.label }}</td><td>{{ form.email }}{{ form.email.errors }}</td></tr>
      </table>
   </div>
   <h3>Brief information</h3>
   <table>
      <tr{% if form.first_name.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.first_name.label }}</td><td colspan="2">{{ form.first_name }}{{ form.first_name.errors }}</td></tr>
      <tr{% if form.last_name.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.last_name.label }}</td><td colspan="2">{{ form.last_name }}{{ form.last_name.errors }}</td></tr>
      <tr{% if form.department.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.department.label }}</td><td colspan="2">{{ form.department }}{{ form.department.errors }}</td></tr>
      <tr{% if form.building.errors %} class="errorlist"{% endif %}><td class="tablehead">Location</td><td>{{ form.building }}{{ form.building.errors }}</td><td{% if form.room.errors %} class="errorlist"{% endif %}>{{ form.room }}{{ form.room.errors }}</td></tr>
      <tr{% if form.location_text.errors %} class="errorlist"{% endif %}><td class="tablehead">Other location</td><td colspan="2">{{ form.location_text }}{{ form.location_text.errors }}</td></tr>
   </table>
   <h3>{{ form.description.label }}</h3>
   <p{% if form.description.errors %} class="errorlist"{% endif %}>{{ form.description }}{{ form.description.errors }}</p>
   <div class="right">
      <h3>Technician information</h3>
      <table>
         <tr{% if form.technician.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.technician.label }}</td><td>{{ form.technician }}{{ form.technician.errors }}</td></tr>
      </table>
   </div>
   <h3>{{ form.actions.label }}</h3>
   <p{% if form.actions.errors %} class="errorlist"{% endif %}>{{ form.actions }}{{ form.actions.errors }}</p>
   <h3>Financial information</h3>
   <table>
      <tr{% if form.labor.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.labor.label }}</td><td>{{ form.labor }}{{ form.labor.errors }}</td></tr>
      <tr{% if form.material_costs.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.material_costs.label }}</td><td>{{ form.material_costs }}{{ form.material_costs.errors }}</td></tr>
      <tr{% if form.funding_source.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.funding_source.label }}</td><td>{{ form.funding_source }}{{ form.funding_source.errors }}</td></tr>
      <tr{% if form.budget.errors %} class="errorlist"{% endif %}><td class="tablehead">{{ form.budget.label }}</td><td>{{ form.budget }}{{ form.budget.errors }}</td></tr>
   </table>
   <h1><span class="right"><input type="submit" name="save" value="save" id="save" /></span>
      {% if form.inital %}WO #{{ object.id }}: <span class="head">edit mode</span>
         {% else %}New work order <span class="head">creation mode</span>
      {% endif %}
   </h1>
   </form>
</div>
{% endblock %}