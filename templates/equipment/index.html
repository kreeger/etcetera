{% extends "root.html" %}
{% load etcetera_tags %}

{% block title %}Equipment{% endblock %}

{% block breadcrumb %}
   <a href="{% url etcetera-home %}">Home</a> &rsaquo;
   {% ifequal type 'index' %}
      Equipment Inventory
   {% endifequal %}
   {% ifequal type 'weekly' %}
      <a href="{% url equipment-index %}">Equipment</a>
      &rsaquo; Weekly Checklist
   {% endifequal %}
{% endblock %}

{% block subnav %}
   <ul>
      <li><a href="{% url equipment-index %}">Equipment Inventory</a></li>
      <li><a href="{% url equipment-weekly %}">Weekly Checklist</a></li>
   </ul>
{% endblock %}

{% block content %}
<div id="list">
   <h1>
      <span class="right">
         <a href="{% url equipment-new %}">add a new item</a>
      </span>
      
      {% ifequal type 'weekly' %}
         Weekly Equipment Checklist
      {% endifequal %}
      {% ifequal type 'index' %}
         Equipment Inventory
      {% endifequal %}
      
      {% if q %}
         <span class="head">searching for: "{{ q }}"</span>
         <span class="small">(<a href=".">click here to reset</a>)</span>
      {% endif %}
   </h1>
   
   {% if form %}
   <div id="searchform">
      <form action="">
         {{ form.q }}
         Search in:
         {{ form.equipment_type }} {{ form.equipment_type.label }}
         {{ form.barcode }} {{ form.barcode.label }}
         {{ form.location }} {{ form.location.label }}
         {{ form.serial }} {{ form.serial.label }}
         {{ form.smsu_id }} {{ form.smsu_id.label }}
         {{ form.comments }} {{ form.comments.label }}
         <input type="submit" name="submit" value="Search" id="submit" />
      </form>
      {% if q %} {% endif %}
   </div>
   {% endif %}
   <table id="list">
      <tr id="headerrow">
         {% ifequal type 'weekly' %}
            <td>&radic;</td>
         {% endifequal %}
         <td>Barcode</td>
         {% ifequal type 'weekly' %}
            <td>SMS #</td>
         {% endifequal %}
         <td>Type</td>
         <td>Make &amp; Model</td>
         <td>Status</td>
         <td>Location</td>
         {% ifequal type 'weekly' %}
            <td>Serial #</td>
            <td>Vid Unit</td>
            <td>Comp Unit</td>
            <td>Comments</td>
         {% endifequal %}
      </tr>
      {% for object in object_list %}
         <tr class="datarow">
            {% ifequal type 'weekly' %}
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     &nbsp;
                  </a>
               </td>
            {% endifequal %}
            <td>
               <a href="{% url equipment-detail object.id %}">
                  {{ object.barcode }}
               </a>
            </td>
            {% ifequal type 'weekly' %}
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     {{ object.smsu_id }}
                  </a>
               </td>
            {% endifequal %}
            <td>
               <a href="{% url equipment-detail object.id %}">
                  {{ object.equipment_type.name }}
               </a>
            </td>
            <td>
               <a href="{% url equipment-detail object.id %}">
                  {{ object.make.name }} {{ object.model }}
               </a>
            </td>
            <td>
               <a href="{% url equipment-detail object.id %}">
                  {{ object.get_status_display }}
               </a>
            </td>
            <td>
               <a href="{% url equipment-detail object.id %}">
                  {{ object.building.abbreviation }} {{ object.room }}
               </a>
            </td>
            {% ifequal type 'weekly' %}
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     {{ object.serial }}
                  </a>
               </td>
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     {{ object.video_unit|default:"" }}
                  </a>
               </td>
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     {{ object.cc_unit|default:"" }}
                  </a>
               </td>
               <td>
                  <a href="{% url equipment-detail object.id %}">
                     {{ object.comments }}
                  </a>
               </td>
            {% endifequal %}
         </tr>
      {% endfor %}
   </table>
   
   {% if paged_objects %}
      {% if form.as_url_args %}
         {% paginate form.as_url_args %}
      {% else %}
         {% paginate %}
      {% endif %}
   {% endif %}
</div>
{% endblock %}